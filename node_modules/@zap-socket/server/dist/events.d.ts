import { z } from "zod";
import type { EventInput, ZapEvent, ZapStream, ZapServerEvent, MiddlewareType, MiddlwareContext } from "@zap-socket/types";
import { ZapServer } from "./server.js";
export type Context = {
    server: ZapServer<any>;
    id: string;
    buffer: MiddlwareContext;
};
export declare const zapEvent: <T extends EventInput, R, E = undefined>(eventObj: T extends z.ZodTypeAny ? {
    input: T;
    middleware?: MiddlewareType[];
    process: (input: z.infer<T>, ctx: Context) => R;
    emitType?: E extends undefined ? undefined : E;
} : {
    middleware?: MiddlewareType[];
    process: (ctx: Context) => R;
    emitType?: E extends undefined ? undefined : E;
}) => ZapEvent<T, R, E>;
export declare const zapStream: <T extends EventInput, R>(eventObj: T extends z.ZodTypeAny ? {
    input: T;
    middleware?: MiddlewareType[];
    process: (input: z.infer<T>, ctx: Context) => AsyncGenerator<R, void, unknown>;
} : {
    middleware?: MiddlewareType[];
    process: (ctx: Context) => AsyncGenerator<R, void, unknown>;
}) => ZapStream<T, R>;
export declare const zapServerEvent: <T extends z.ZodTypeAny>(eventObj: {
    data: T;
}) => ZapServerEvent<T>;
